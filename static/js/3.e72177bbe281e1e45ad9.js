webpackJsonp([3],{fnPJ:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n="ws://echo.websocket.org/",o={data:function(){return{ws:{connected:!1,error:!1},comments:[{id:1,message:"Тестовый коммент"},{id:2,message:"Это шедевр"},{id:3,message:"Это прекрасно"},{id:4,message:"Лучшее, что я видел"},{id:5,message:"Два чая этому автору"},{id:6,message:"Тестовый коммент"},{id:7,message:"Это шедевр"},{id:8,message:"Это прекрасно"},{id:9,message:"Лучшее, что я видел"},{id:10,message:"Два чая этому автору"}]}},mounted:function(){var e=this;this.$ws=new WebSocket(n),this.$ws.onopen=function(){e.ws.connected=!0,console.log("[WebSocket]","connected to",n)},this.$ws.onclose=function(){e.ws.connected=!1,console.log("[WebSocket]","disconnected",event.code)},this.$ws.onmessage=function(s){e.handleWsResponse(s.data)},this.$ws.onerror=function(){console.error("[WebSocket]","error"),e.ws.error=!0}},methods:{handleWsResponse:function(e){var s=Number(e);this.removeCommentCommit(s)},sendWsRequest:function(e){this.ws.connected||console.error("WebSocket not connected"),this.$ws.send(e)},removeCommentRequest:function(e){this.sendWsRequest(e)},removeCommentCommit:function(e){var s=this.comments.find(function(s){return s.id===e});if(s){var t=this.comments.indexOf(s);this.comments.splice(t,1)}else console.error("Comment with id="+id+" not found")}},beforeDestroy:function(){this.ws.connected&&this.$ws.close()}},c={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[t("h1",[e._v("Websocket")]),e._v(" "),t("div",[t("ul",{staticClass:"comments"},e._l(e.comments,function(s){return t("li",{key:s.id,staticClass:"comment"},[t("div",{staticClass:"message",domProps:{textContent:e._s(s.message)}}),e._v(" "),t("button",{staticClass:"action",on:{click:function(t){e.removeCommentRequest(s.id)}}},[e._v("Удалить")])])}))])])},staticRenderFns:[]};var i=t("VU/8")(o,c,!1,function(e){t("ujdh")},"data-v-1c135053",null);s.default=i.exports},ujdh:function(e,s){}});
//# sourceMappingURL=3.e72177bbe281e1e45ad9.js.map